{"version":3,"sources":["webpack:///../Documents/access_controls.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","alt","src","parentName","isMDXComponent"],"mappings":"kfAMO,IAAMA,EAAe,Q,+MAE5B,IAKMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,iBAAQ,CACN,GAAM,kBADR,kBAGA,qBAAG,mBAAKC,IAAI,uBAAuBC,IAAI,iEACvC,wQAIA,iBAAQ,CACN,GAAM,cADR,cAGA,0DAAyC,kBAAIC,WAAW,KAAf,SAAzC,UAAqF,kBAAIA,WAAW,KAAf,QAArF,uCACoB,kBAAIA,WAAW,KAAf,iBADpB,0CAEK,kBAAIA,WAAW,KAAf,YAFL,cAEwD,kBAAIA,WAAW,KAAf,iBAFxD,+DAGkC,kBAAIA,WAAW,KAAf,QAHlC,8EAKA,qBAAG,mBAAKF,IAAI,uBAAuBC,IAAI,yEACvC,iKAEC,0BAAYC,WAAW,KAAvB,wBAFD,iCAGF,0BAAYA,WAAW,KAAvB,oBAHE,KAIA,iBAAQ,CACN,GAAM,YADR,YAGA,yBACE,qBAAOA,WAAW,SAChB,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,QAEX,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,sBAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,eAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,aAKJ,qBAAOA,WAAW,SAChB,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,sBAAQA,WAAW,MAAnB,iBACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,oBACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,gEAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,mCAEL,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,sBAAQA,WAAW,MAAnB,YACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,YAFH,KAE8D,0BAAYA,WAAW,MAAvB,wBAC9D,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,6DAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,sBAEL,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,sBAAQA,WAAW,MAAnB,SACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,SAFH,KAE2D,0BAAYA,WAAW,MAAvB,qBAC3D,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,yGAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,kBAEL,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,sBAAQA,WAAW,MAAnB,iBACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,yBAFH,KAE2E,0BAAYA,WAAW,MAAvB,wBAC3E,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,oEAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,WAKjB,kDAAiC,0BAAYA,WAAW,KAAvB,mBAAjC,WACA,iBAAQ,CACN,GAAM,2BADR,2BAGA,qBAAG,mBAAKF,IAAI,uDAAuDC,IAAI,kEAAvE,kFACmB,mBAAGC,WAAW,KAAQ,CACrC,KAAQ,+BADO,kBADnB,KAIA,iBAAQ,CACN,GAAM,wBADR,wBAGA,qBAAG,sBAAQA,WAAW,KAAI,kBAAIA,WAAW,UAAf,0GAA1B,wEAGA,mWAKA,iBAAQ,CACN,GAAM,cADR,cAGA,uFACA,yBACE,qBAAOA,WAAW,SAChB,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,SAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,QAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,uBAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,iBAKJ,qBAAOA,WAAW,SAChB,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,OAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,UAFH,OAE8D,0BAAYA,WAAW,MAAvB,kBAC9D,oBAAIA,WAAW,MAAS,CACtB,MAAS,QAEX,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,mDAIF,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,OAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,YACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,UACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,wDAIF,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,YAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,eACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,SACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,qEAIF,kBAAIA,WAAW,SACb,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,YAGA,oBAAIA,WAAW,MAAS,CACtB,MAAS,OACR,0BAAYA,WAAW,MAAvB,aACH,oBAAIA,WAAW,MAAS,CACtB,MAAS,QAEX,oBAAIA,WAAW,MAAS,CACtB,MAAS,OADX,iDAMN,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,wBADZ,qGAKL,iBAAQ,CACN,GAAM,eADR,eAGA,0GACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBACb,WAAc,mDACd,aAAe,EACf,MAAQ,EACR,mCAAmC,IALlC,8RAiBL,iBAAQ,CACN,GAAM,oBADR,oBAGA,qBAAG,mBAAGA,WAAW,KAAQ,CACrB,KAAQ,uDACR,MAAS,4BAFV,kBAGqB,0BAAYA,WAAW,KAAvB,UAHxB,kDAGgI,mBAAGA,WAAW,KAAQ,CAClJ,KAAQ,iGADoH,0BAHhI,8BAMgD,mBAAGA,WAAW,KAAQ,CAClE,KAAQ,iDADoC,kBANhD,KASA,wQAIgB,0BAAYA,WAAW,KAAvB,iBAJhB,gEAKgB,0BAAYA,WAAW,KAAvB,cALhB,+CAMA,iCACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,wBADZ,0uBA6BL,iBAAQ,CACN,GAAM,2BADR,2BAGA,sBACE,kBAAIA,WAAW,MAAK,sBAAQA,WAAW,MAAnB,mBAApB,KAA8E,0BAAYA,WAAW,MAAvB,cAA9E,6BACA,kBAAIA,WAAW,MAAK,sBAAQA,WAAW,MAAnB,sBAApB,KAAiF,0BAAYA,WAAW,MAAvB,iBAAjF,8BAEF,iBAAQ,CACN,GAAM,mBADR,mBAGA,qBAAG,0BAAYA,WAAW,KAAvB,mBAAH,SAAwE,mBAAGA,WAAW,KAAQ,CAC1F,KAAQ,0DAD4D,0BAAxE,qGAKA,iBAAQ,CACN,GAAM,kBADR,kBAGA,iBAAQ,CACN,GAAM,SADR,SAGA,2CAA0B,0BAAYA,WAAW,KAAvB,mBAA1B,QAA8F,0BAAYA,WAAW,KAAvB,SAA9F,sBAAsK,0BAAYA,WAAW,KAAvB,WAAtK,0BACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,wBADZ,yHAWL,iBAAQ,CACN,GAAM,6BADR,6BAGA,iBAAQ,CACN,GAAM,yBADR,yBAGA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,uBAA2C,0BAAYA,WAAW,KAAvB,mBAA3C,8BACA,kBAAIA,WAAW,MACb,kBAAIA,WAAW,MAAf,mDACA,kBAAIA,WAAW,MAAK,0BAAYA,WAAW,MAAvB,0CAApB,SAAiH,0BAAYA,WAAW,MAAvB,kBAAjH,OAAoL,0BAAYA,WAAW,MAAvB,oCAGxL,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,wDAA4E,0BAAYA,WAAW,KAAvB,oBAA5E,QAAiJ,0BAAYA,WAAW,KAAvB,uBAAjJ,mBAEF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,8BAAkD,0BAAYA,WAAW,KAAvB,kBAAlD,gEACa,0BAAYA,WAAW,KAAvB,kBADb,uEAEA,mBAAKA,WAAW,MAAK,sBAAMA,WAAW,OAAU,IAA3B,4TASzB,iBAAQ,CACN,GAAM,oBADR,oBAGA,sBACE,kBAAIA,WAAW,MAAf,2BAAgD,0BAAYA,WAAW,MAAvB,YAAhD,2EAAiL,kBAAIA,WAAW,MAC5L,kBAAIA,WAAW,MAAf,mDACA,kBAAIA,WAAW,MAAK,0BAAYA,WAAW,MAAvB,8CAApB,SAAqH,0BAAYA,WAAW,MAAvB,cAArH,OAAoL,0BAAYA,WAAW,MAAvB,+BAExL,kBAAIA,WAAW,MAAf,4CAAiE,0BAAYA,WAAW,MAAvB,wBAEnE,iBAAQ,CACN,GAAM,iBADR,iBAGA,iBAAQ,CACN,GAAM,sBADR,sBAGA,4SAIA,2EAA0D,0BAAYA,WAAW,KAAvB,oBAA1D,8GAEsB,0BAAYA,WAAW,KAAvB,uBAFtB,M,sMAOJN,EAAWO,gBAAiB","file":"component---documents-access-controls-mdx-9a3298077c8eade35e18.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/hjalti/Klappir_docs/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"access-control\"\n    }}>{`Access Control`}</h1>\n    <p><img alt=\"Venn Diagram Showing\" src=\"https://static.klappir.io/img/docs/access_controls_logo.svg\" /></p>\n    <p>{`Every complex system needs to manage users and their access to\nits features. Klappir uses a role-based system where users get\naccess to feature-flags that are given based on their roles and\ntheir company's subscriptions to our products.`}</p>\n    <h2 {...{\n      \"id\": \"high-level\"\n    }}>{`High level`}</h2>\n    <p>{`Each user is assigned one or more `}<em parentName=\"p\">{`roles`}</em>{`. Each `}<em parentName=\"p\">{`role`}</em>{` in turn has\naccess to one or more `}<em parentName=\"p\">{`feature flags`}</em>{`. Companies have subscriptions\nto our `}<em parentName=\"p\">{`products`}</em>{` that have `}<em parentName=\"p\">{`feature flags`}</em>{` associated with them.\nUsers get assigned these flags when `}<em parentName=\"p\">{`both`}</em>{` their roles and company\n(via product subscriptions) have access to them.`}</p>\n    <p><img alt=\"Venn Diagram Showing\" src=\"https://static.klappir.io/img/docs/access_controls_venn_diagram.svg\" /></p>\n    <p>{`For historic reasons, and in case of exceptional custom features,\nusers also get access to any flag that is linked to their company\nin `}<inlineCode parentName=\"p\">{`\u001bcompany_permissions`}</inlineCode>{` (and possibly soon flags in\n`}<inlineCode parentName=\"p\">{`user_permissions`}</inlineCode>{`)`}</p>\n    <h3 {...{\n      \"id\": \"glossary\"\n    }}>{`Glossary`}</h3>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Db Table Name(s) *`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Example`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Feature flag`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`permission_keys`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`String that gives access to features and data in the system.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`advance_maritime_voyages_full`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Product`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`products`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`product_permissions`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A set of feature flags that probably costs a monthly fee.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`advance_maritime`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Role`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`roles`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`role_permissions`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Every user belongs to one or more roles, that in turn give the user access to a set of feature flags.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`ship_captain`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Subscription`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`company_subscriptions`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`asset_subscriptions`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Subscriptions to products, with a start and (possibly) end date.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`*All tables are under the `}<inlineCode parentName=\"p\">{`klappir_core_ui`}</inlineCode>{` schema`}</p>\n    <h2 {...{\n      \"id\": \"database-implementation\"\n    }}>{`Database Implementation`}</h2>\n    <p><img alt=\"Database schema design for Klappir's access controls\" src=\"https://static.klappir.io/img/docs/access_controls_tables.png\" />{` \"Database schema design for Klappir's access controls\"\n(Chart generated via `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.dbdesigner.net\"\n      }}>{`DbDesigner.net`}</a>{`)`}</p>\n    <h2 {...{\n      \"id\": \"react-implementation\"\n    }}>{`React Implementation`}</h2>\n    <p><strong parentName=\"p\"><em parentName=\"strong\">{`Note that checking for permissions in the client is not enough to\nsecurely limit access to features.`}</em></strong>{`\nAccess permissions should always be checked on the server/GraphQL.`}</p>\n    <p>{`Most of the time there is no need to use the flags directly from the\nRedux state. In fact doing so is discouraged since this implementation\nmight change at some point, eg. if we might want to remove Redux.\nWe have a set of components that make this whole thing easer to work with\nand abstract some implementation details away.`}</p>\n    <h3 {...{\n      \"id\": \"components\"\n    }}>{`Components`}</h3>\n    <p>{`All components share the same api for dealing with permissions`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Param`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Default`}{`Â `}{`value`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`has`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`string`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`Array<string>`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`List of feature flags needed to access feature`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`all`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`boolean`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`false`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Whether all listed flags are needed to gain access.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`fallback`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`React.Node`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`null`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Optional fallback to be rendered when permission is not granted.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`resolver`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Resolver`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Optional custom function to resolve access`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`type Resolver =\n  (permissionsList: Array<string>, userPermissions: Array<string>) => boolean\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"permissions\"\n    }}>{`Permissions`}</h4>\n    <p>{`A simple gate component that wraps features that need special permissions to use.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-import\",\n        \"metastring\": \"Permissions from './Permissions/Permissions.js';\",\n        \"Permissions\": true,\n        \"from\": true,\n        \"'./Permissions/Permissions.js';\": true\n      }}>{`import { PERMISSION_KEY } from './permissions.js';\n\nconst PermissionButton = () => (\n  <Permissions\n    has={PERMISSION_KEY}\n    fallback={<p>You don't have access to this feature</p>}\n  >\n    <button onClick={doSomething()}>Delete Everything</button>\n  </Permission>\n);\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"permissionsroute\"\n    }}>{`PermissionsRoute`}</h4>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://reacttraining.com/react-router/web/api/Route\",\n        \"title\": \"Route API Documentation\"\n      }}>{`React-Router's `}<inlineCode parentName=\"a\">{`Route`}</inlineCode></a>{` wrapped with permissions, and logic to enable `}<a parentName=\"p\" {...{\n        \"href\": \"https://reactjs.org/blog/2018/10/23/react-v-16-6.html#reactlazy-code-splitting-with-suspense\"\n      }}>{`React\n16.6's Suspense`}</a>{` feature to do route-based `}<a parentName=\"p\" {...{\n        \"href\": \"https://reactjs.org/docs/code-splitting.html\"\n      }}>{`code-splitting`}</a>{`.`}</p>\n    <p>{`In addition to the React-Router Route API and the above Permissions API,\nit adds the following in order to load components lazily:\n| Param         | Type            | Description\n|---------------|-----------------|---\n| lazyComponent | `}<inlineCode parentName=\"p\">{`() => Promise`}</inlineCode>{` | Component that should be loaded lazily\n| lazyFallback  | `}<inlineCode parentName=\"p\">{`React.Node`}</inlineCode>{`    | Component to be rendered when loading`}</p>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`import Route from './Permissions/PermissionsRoute';\nimport SomeComponent from './SomeComponent';\n\nimport { SOME_ROUTE, SOME_OTHER_ROUTE } from './routes';\nimport { FEATURE_FLAG, ANOTHER_FEATURE_FLAG } from './permissions';\n\nconst LazyComponent = () => import('./MyComponent');\n\nconst SomeRoutes = () => {\n  return (\n    <>\n      <Route\n        has={[FEATURE_FLAG, ANOTHER_FEATURE_FLAG]}\n        all\n        fallback={<p>You don't have access to the feature</p>}\n        lazyComponent={LazyComponent}\n        lazyFallback={<div>Loading...</div>}\n      />\n      <Route\n        has={FEATURE_FLAG}\n        component={SomeComponent}\n        fallback={<p>You don't have access to the feature</p>}\n      />\n    </>\n  );\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"other-simple-components\"\n    }}>{`Other simple components`}</h4>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PermissionsLink`}</strong>{`: `}<inlineCode parentName=\"li\">{`ParamsLink`}</inlineCode>{` wrapped with Permissions`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PermissionsNavLink`}</strong>{`: `}<inlineCode parentName=\"li\">{`ParamsNavLink`}</inlineCode>{` wrapped with Permissions`}</li>\n    </ul>\n    <h4 {...{\n      \"id\": \"withpermissions\"\n    }}>{`withPermissions`}</h4>\n    <p><inlineCode parentName=\"p\">{`withPermissions`}</inlineCode>{` is a `}<a parentName=\"p\" {...{\n        \"href\": \"https://reactjs.org/docs/higher-order-components.html\"\n      }}>{`higher-order component`}</a>{`\nthat is the foundation to many of the above components, but can\nalso be used to wrap new ones.`}</p>\n    <h3 {...{\n      \"id\": \"best-practices\"\n    }}>{`Best practices`}</h3>\n    <h3 {...{\n      \"id\": \"redux\"\n    }}>{`Redux`}</h3>\n    <p>{`A logged in user's `}<inlineCode parentName=\"p\">{`permission_keys`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`roles`}</inlineCode>{` are stored in the `}<inlineCode parentName=\"p\">{`profile`}</inlineCode>{` section in the state:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`state: {\n  ...\n  profile: {\n    permissions: ['key1', 'key2'],\n    roles: ['role1', 'role2'],\n    ...\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"new-features-and-products\"\n    }}>{`New features and products`}</h2>\n    <h3 {...{\n      \"id\": \"adding-a-feature-flag\"\n    }}>{`Adding a Feature Flag`}</h3>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add your new key to `}<inlineCode parentName=\"p\">{`permission_keys`}</inlineCode>{` table with a description.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Key names should be predictable and structured.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`[product category]_[product]_[feature]`}</inlineCode>{` eg.: `}<inlineCode parentName=\"li\">{`core_users_add`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`advance_maritime_voyages_full`}</inlineCode></li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add the new key to appropriate roles and products in `}<inlineCode parentName=\"p\">{`role_permissions`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`product_permissions`}</inlineCode>{` respectively.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add new key to appropriate `}<inlineCode parentName=\"p\">{`permissions.js`}</inlineCode>{` file. Each product category has its own\nfolder and its own `}<inlineCode parentName=\"p\">{`permissions.js`}</inlineCode>{` file where its permission keys are kept and exported as variables.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`\\`\\`\\`javascript\n// src/core/permissions.js\nexport const CORE_USERS_ADD = 'core_users_add';\n\\`\\`\\`\n* _Feature flags should always be used as imported variables, **never as direct strings**._ This makes it easier to\n  update flag strings, makes errors and typos obvious, and enables intellisense autocomplete.\n`}</code></pre>\n      </li>\n    </ol>\n    <h3 {...{\n      \"id\": \"adding-a-product\"\n    }}>{`Adding a Product`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`Add your new product to `}<inlineCode parentName=\"li\">{`products`}</inlineCode>{` table with a description and whatever other information you have on it.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Key names should be predictable and structured.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`[product category]_[product]_[sub-product]`}</inlineCode>{` eg.: `}<inlineCode parentName=\"li\">{`core_users`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`advance_maritime_voyages`}</inlineCode></li>\n        </ul></li>\n      <li parentName=\"ol\">{`Add feature flags to the new product via `}<inlineCode parentName=\"li\">{`product_permission`}</inlineCode></li>\n    </ol>\n    <h3 {...{\n      \"id\": \"adding-a-role\"\n    }}>{`Adding a Role`}</h3>\n    <h2 {...{\n      \"id\": \"future-development\"\n    }}>{`Future Development`}</h2>\n    <p>{`Currently (as of 2019-01-15) users can only be associated with a company,\nand thus access to features and, more importantly, data, can only be limited\nto the company level. We plan on changing the structure for companies and assets to\nallow different connections to users.`}</p>\n    <p>{`Currently (as of 2019-01-15) a legacy table called `}<inlineCode parentName=\"p\">{`user_permissions`}</inlineCode>{` does\nexist, but is not used. We are discussing whether to add it to this system\nis a similar fashion to `}<inlineCode parentName=\"p\">{`company_permissions`}</inlineCode>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}